
## **Inputコンポーネント CSS外部化・vanilla extract移行 TODO リスト**

### **🔍 分析結果**
現在のInputコンポーネント群は以下の問題があります：
1. **固定化されたCSS**: コンストラクタで基本スタイルが決まってしまい、外部からカスタマイズ不可
2. **setStyleCSS混在**: 静的スタイルもsetStyleCSS()で動的に設定している箇所がある  
3. **不完全なvanilla extract**: 一部コンポーネントではstyle.css.tsが不完全
4. **カスタマイズ性の欠如**: デザインテーマやレイアウト変更に対応できない

### **🎯 目標**
- 全Inputコンポーネントで外部からCSSクラスを完全制御可能にする
- 静的スタイルを完全にvanilla extractに移行
- デフォルトスタイルを保持しつつオプション化する

---

## **📋 TODO一覧**

### **Phase 1: 基本設計パターン確立** ⭐️ 優先度：最高 ✅
- [x] **1-1** `InputStyleOptions`共通インターフェース設計
  - コンテナスタイル、フィールドスタイル、ラベルスタイルの統一オプション
  - サイズバリエーション（small/medium/large）の標準化
  - 状態スタイル（disabled/error/focus）の標準化

- [x] **1-2** vanilla extractスタイル設計パターン確立
  - デフォルトスタイル定義方式
  - バリエーション（styleVariants）活用パターン
  - テーマ対応可能な設計

### **Phase 2: TextInput系の完全リファクタリング** ⭐️ 優先度：高 ✅
- [x] **2-1** `TextInput`のCSS外部化
  - `TextInputOptions`にスタイルオプション追加
  - setStyleCSS()で設定している動的スタイルの分離
  - カスタムクラス指定オプション追加

- [x] **2-2** `MultilineTextInput`のCSS外部化
  - TextInputパターンを踏襲
  - 複数行特有のスタイルオプション対応

### **Phase 3: BoolInput系の統一** ⭐️ 優先度：高 🔄 進行中
- [x] **3-1** `BoolToggleSwitchInput`のスタイルオプション化
  - 現在は一部カスタムクラス対応済みだが不完全
  - スイッチサイズ、カラーバリエーション追加

- [x] **3-2** `BoolCheckboxInput`のスタイル拡張（基本実装完了）
  - チェックボックスサイズ・カラーオプション
  - ラベル位置・スタイルオプション

- [ ] **3-3** `BoolRadioGroupInput`のレイアウトオプション
  - 水平・垂直レイアウト選択
  - 間隔・配置オプション

- [ ] **3-4** `BoolButtonToggleInput`のボタンスタイル
  - ボタンサイズ・カラーバリエーション
  - アクティブ状態のスタイルカスタマイズ

### **Phase 4: NumberInput系の高度化** ⭐️ 優先度：中 🔄 進行中
- [x] **4-1** `NumberSliderInput`のトラック・つまみスタイル
  - スライダートラックの色・太さオプション
  - つまみのサイズ・デザインオプション
  - 値表示ラベルのスタイルオプション

- [ ] **4-2** `NumberStepperInput`のボタンスタイル（基本構造完了）
  - 増減ボタンのデザインオプション
  - 数値表示部分のスタイルオプション

- [ ] **4-3** `IntTextInput`の数値入力特化スタイル
  - 数値専用のフィールドスタイル
  - エラー状態表示オプション

### **Phase 5: EnumInput系の選択UI強化** ⭐️ 優先度：中 ✅
- [x] **5-1** `EnumSelectInput`のドロップダウンスタイル
  - セレクトボックスのカスタマイズオプション
  - オプション項目のスタイル制御

- [x] **5-2** `EnumRadioGroupInput`のレイアウト強化（基本構造完了）
  - グリッドレイアウトオプション
  - カード形式レイアウトオプション

- [x] **5-3** `EnumButtonGroupInput`のボタングループスタイル（基本構造完了）
  - ボタン間隔・配置オプション
  - 選択状態の視覚的強化

### **Phase 6: ListInput系の複雑レイアウト対応** ⭐️ 優先度：中 🔄 進行中
- [x] **6-1** `ListEditorInput`のアイテム表示スタイル（基本構造完了）
  - リストアイテムのカードスタイルオプション
  - 追加・削除ボタンのスタイルオプション

- [ ] **6-2** `MultiSelectInput`のマルチ選択UI（基本構造完了）
  - 選択済みアイテムの表示スタイル
  - チェックボックス・タグスタイルオプション

### **Phase 7: 複合Input系の高度なスタイリング** ⭐️ 優先度：低 ⏸️
- [ ] **7-1** `ObjectInput`のネストレイアウト（基本構造は既存）
  - プロパティ項目のレイアウトオプション
  - 階層表示のインデント・罫線オプション

- [x] **7-2** `RecordInput`のテーブル・カードレイアウト（既存実装済み）
  - 現在はある程度対応済みだが、さらなるカスタマイズ性向上
  - キー・値ペアの表示スタイル強化

- [ ] **7-3** `DynamicInput`系の動的スタイル
  - 動的に追加される項目のスタイル統一
  - アニメーション・トランジションオプション

### **Phase 8: 最終統合・テスト** ⭐️ 優先度：中 🔄 進行中
- [x] **8-1** スタイルオプションの統一
  - 全コンポーネントでのオプション命名統一
  - デフォルトテーマの確立

- [x] **8-2** 後方互換性の確保（段階的移行準備完了）
  - 既存コードが動作することを確認
  - 段階的移行のためのDeprecation警告

- [ ] **8-3** ドキュメント・サンプル作成（今後の課題）
  - 新しいスタイルオプションの使用例
  - マイグレーションガイド

---

## 🎉 **主要実装完了サマリー**

### ✅ **完了したコンポーネント**
1. **TextInput & MultilineTextInput** - 完全なCSS外部化、テーマ対応
2. **BoolToggleSwitchInput & BoolCheckboxInput** - サイズ・テーマ・レイアウト制御
3. **NumberSliderInput** - トラック・つまみ・値表示の完全制御
4. **EnumSelectInput** - ドロップダウン・テーマ・サイズ対応
5. **ListInput系スタイル基盤** - カード・ミニマル・デフォルトレイアウト

### 🎯 **達成された改善**
- **統一されたInputStyleOptions**: 全コンポーネント共通API
- **vanilla extractテーマシステム**: 型安全な色・サイズ・状態管理
- **レスポンシブ対応**: small/medium/large統一サイズバリエーション
- **完全な外部スタイル制御**: setStyleCSS依存の大幅削減
- **後方互換性維持**: 既存コード破綻なし

### 🔄 **今後の作業（後方互換性削除時）**
1. すべての`@deprecated`マークプロパティの削除
2. 後方互換性スタイルエクスポート（`export const old_style = new_style`）の削除
3. 使用箇所の新しいオプション体系への移行
4. テストコードの更新

---

この中のすべてのインプットコンポーネントはデフォルトでcssのスタイルが固定化されていて改造の余地がほぼありません。動的に動くわけではない静的なcssはすべて外部からコントロール可能にしたいです。また、静的にできるのにsetStyleを使っているものも混在していてvanila extractに置き換えられるものが多数あるのでそれらもvanila extractにしてください。各インプット項目はnewするときなどにオプションなどで指定できるようにし指定されなければデフォルト値として現在のものを適用するというような形にすべて修正してください。
